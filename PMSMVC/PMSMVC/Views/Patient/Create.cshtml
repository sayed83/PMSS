@model PMSMVC.Models.Patient

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";

    List<SelectListItem> Gender = new List<SelectListItem>();
    Gender.Add(new SelectListItem
    {
        Text = "Male",
        Value = "Male"
    });
    Gender.Add(new SelectListItem
    {
        Text = "Female",
        Value = "Female",
    });
    Gender.Add(new SelectListItem
    {
        Text = "Others",
        Value = "Others"
    });
}

@section CustomJS
{
    <script>
        $(document).ready(function () {
            $('#savePatient').click(function (e) {
                e.preventDefault();
                var data = $('#PatientForm').serialize();
                $.ajax({
                    type: "POST",
                    url: "/Patient/Create",
                    data: data,
                    success: function (result) {
                        $('#PatientForm').trigger("reset");//form reset after submiting
                        $('#show-success').slideDown();
                    }
                });
            });
            
        });
            
    </script>
}

<form id="PatientForm" method="post" onsubmit="return SavePatient(this);">
    @Html.AntiForgeryToken()
    
    <div class="form-horizontal">
        <h4>Patient</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            <label class="control-label col-md-2">Patient Name</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.PatientName, new { htmlAttributes = new { @class = "col-xs-10 col-sm-5" } })
                @Html.ValidationMessageFor(model => model.PatientName, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Age</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.Age, new { htmlAttributes = new { @class = "col-xs-10 col-sm-5" } })
                @Html.ValidationMessageFor(model => model.Age, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Gender</label>
            <div class="col-md-10">
                @Html.DropDownListFor(model => model.Gender, Gender, new { @class = "col-xs-10 col-sm-5" })
                @Html.ValidationMessageFor(model => model.Gender, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Contact Number</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.ContactNumber, new { htmlAttributes = new { @class = "col-xs-10 col-sm-5" } })
                @Html.ValidationMessageFor(model => model.ContactNumber, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Room No.</label>
            <div class="col-md-10">
                @Html.DropDownList("RoomID", null, htmlAttributes: new { @class = "col-xs-10 col-sm-5" })
                @Html.ValidationMessageFor(model => model.RoomID, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <button id="savePatient" class="btn btn-default">Save Patient</button>
            </div>
        </div>
    </div>
</form>

<div id="show-success" class="success-save alert alert-block alert-success">
    <button type="button" class="close" data-dismiss="alert">
        <i class="ace-icon fa fa-times"></i>
    </button>

    <p>
        <strong>
            <i class="ace-icon fa fa-check"></i>
            Well done!
        </strong>
        Patient Save successfully!
    </p>
</div>

<div>
    @Html.ActionLink("Back to List", "Index")
</div>
